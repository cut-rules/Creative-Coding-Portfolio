<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Adventure</title>
    <script src="p5.min.js"></script> <!-- Ensure this file is in your repo -->
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Prevents scrolling */
            background-color: #111;
        }
        .back-button {
            position: fixed;
            top: 10px;
            left: 10px;
            padding: 10px 15px;
            background-color: #008CBA;
            color: white;
            text-decoration: none;
            font-size: 16px;
            border-radius: 5px;
            font-weight: bold;
            z-index: 1000;
        }
        .back-button:hover {
            background-color: #005f73;
        }
    </style>
</head>
<body>

    <a href="index.html" class="back-button">â¬… Back to Home</a>

    <script>
        let backgroundImage, endImage;
        let gameState = "playing";
        let agressive = false;
        let xlocation = 0, ylocation = 0;
        let moves = 6;
        let message1 = "", message2 = "";
        let messageTimer1 = -2000, messageTimer2 = -2000;
        const messageDuration = 2000;
        let metPerson = false;
        let zoneRN;
        let canvasSize = 1000; // Base size to scale from

        let outcomes = [
            "You materialized inside a planet. Instantly crushed.",
            "You teleported directly into a star. Vaporized on arrival.",
            "You died. I'm not even sure what happened.",
            "You phased halfway into an asteroid. The other half didn't make it.",
            "You reappeared inside a black hole. Say goodbye to time itself.",
            "You teleported into the middle of an ongoing space battle. Missiles incoming.",
            "You ended up inside a sunken spaceship. Oxygen was never an option.",
            "You appeared in a reactor core. At least it was quick.",
            "You re-emerged in the middle of a supernova. Good luck with that.",
            "You teleported to an empty void dimension. There is no escape."
        ];

        // Convert fixed values into percentages
        let cockpitZones = [
            { name: "Lightspeed", x: 355 / canvasSize, y: 730 / canvasSize, w: 75 / canvasSize, h: 60 / canvasSize, message: "You escape." },
            { name: "Fire", x: 570 / canvasSize, y: 730 / canvasSize, w: 75 / canvasSize, h: 60 / canvasSize, message: "You fire ... and miss." },
            { name: "Joystick", x: 462 / canvasSize, y: 560 / canvasSize, w: 76 / canvasSize, h: 150 / canvasSize, message: "Which direction do you want to move?" },
            { name: "Eject", x: 740 / canvasSize, y: 730 / canvasSize, w: 50 / canvasSize, h: 40 / canvasSize, message: "Well that was a bad idea." },
            { name: "Information Screen", x: 365 / canvasSize, y: 370 / canvasSize, w: 270 / canvasSize, h: 185 / canvasSize, message: "There seems to be a distress call coming from [2,1].", message2: "It looks like there is a gap in the unidentifiable spacecraft [1,0]" },
        ];

        function preload() {
            backgroundImage = loadImage('pilotcockpitforgame.png');
            endImage = loadImage('shipdestroyed.webp');
        }

        function setup() {
            createCanvas(windowWidth, windowHeight);
            showText("There is a sea of unusually shaped spacecraft in front of you.");
        }

        function draw() {
            checkCursor();
            background(0);
            let img = gameState === "destroyed" ? endImage : backgroundImage;

            // Scale the image while keeping aspect ratio
            let aspectRatio = backgroundImage.width / backgroundImage.height;
            let imgWidth, imgHeight;
            if (windowWidth / windowHeight > aspectRatio) {
                imgHeight = windowHeight;
                imgWidth = imgHeight * aspectRatio;
            } else {
                imgWidth = windowWidth;
                imgHeight = imgWidth / aspectRatio;
            }

            let imgX = (windowWidth - imgWidth) / 2;
            let imgY = (windowHeight - imgHeight) / 2;
            image(img, imgX, imgY, imgWidth, imgHeight);

            if (millis() - messageTimer1 < messageDuration) {
                drawMessage(message1, height / 2);
            }
            if (millis() - messageTimer2 < messageDuration) {
                drawMessage(message2, height / 2 + 60);
            }
        }

        function checkCursor() {
            zoneRN = "0";
            let newZone = "noZone";
            for (let zone of cockpitZones) {
                if (isMouseOver(zone)) {
                    newZone = zone.name;
                    zoneRN = zone;
                    break;
                }
            }
            currentZone = newZone;
            cursor(currentZone !== "noZone" ? 'pointer' : 'default');
        }

        function isMouseOver(zone) {
            let scaleX = width / canvasSize;
            let scaleY = height / canvasSize;
            return mouseX > zone.x * width && mouseX < (zone.x + zone.w) * width &&
                   mouseY > zone.y * height && mouseY < (zone.y + zone.h) * height;
        }

        function mouseClicked() {
            if (currentZone !== "noZone") {
                timePassed();
                let functionName = currentZone == "Information Screen" ? "frontscreen" : currentZone.toLowerCase();
                if (typeof window[functionName] === "function") {
                    window[functionName]();
                }
            }
        }

        function drawMessage(message, yPos) {
            fill(0);
            rect(0, yPos - 25, width, 50);
            fill(255);
            textSize(24);
            textAlign(CENTER, CENTER);
            text(message, width / 2, yPos);
        }

        function showText(text) {
            message1 = text;
            messageTimer1 = millis();
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }

    </script>

</body>
</html>
